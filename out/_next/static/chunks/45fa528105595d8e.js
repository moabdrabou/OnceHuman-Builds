(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,75254,31278,e=>{"use strict";var a=e.i(71645);let t=(...e)=>e.filter((e,a,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===a).join(" ").trim(),s=e=>{let a=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,a,t)=>t?t.toUpperCase():a.toLowerCase());return a.charAt(0).toUpperCase()+a.slice(1)};var r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,a.forwardRef)(({color:e="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:d="",children:o,iconNode:n,...c},m)=>(0,a.createElement)("svg",{ref:m,...r,width:s,height:s,stroke:e,strokeWidth:l?24*Number(i)/Number(s):i,className:t("lucide",d),...!o&&!(e=>{for(let a in e)if(a.startsWith("aria-")||"role"===a||"title"===a)return!0;return!1})(c)&&{"aria-hidden":"true"},...c},[...n.map(([e,t])=>(0,a.createElement)(e,t)),...Array.isArray(o)?o:[o]])),l=(e,r)=>{let l=(0,a.forwardRef)(({className:l,...d},o)=>(0,a.createElement)(i,{ref:o,iconNode:r,className:t(`lucide-${s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,l),...d}));return l.displayName=s(e),l};e.s(["default",()=>l],75254);let d=l("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>d],31278)},71689,e=>{"use strict";let a=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>a],71689)},21218,98919,7559,e=>{"use strict";var a=e.i(75254);let t=(0,a.default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);e.s(["Activity",()=>t],21218);let s=(0,a.default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);e.s(["Shield",()=>s],98919);let r=(0,a.default)("sword",[["path",{d:"m11 19-6-6",key:"s7kpr"}],["path",{d:"m5 21-2-2",key:"1kw20b"}],["path",{d:"m8 16-4 4",key:"1oqv8h"}],["path",{d:"M9.5 17.5 21 6V3h-3L6.5 14.5",key:"pkxemp"}]]);e.s(["Sword",()=>r],7559)},975,e=>{"use strict";let a=(0,e.i(75254).default)("crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);e.s(["Crosshair",()=>a],975)},83086,e=>{"use strict";let a=(0,e.i(75254).default)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);e.s(["Sparkles",()=>a],83086)},56909,e=>{"use strict";let a=(0,e.i(75254).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>a],56909)},68089,e=>{"use strict";var a=e.i(43476),t=e.i(94433),s=e.i(71645),r=e.i(18566),i=e.i(56909),l=e.i(21218),d=e.i(98919),o=e.i(7559),n=e.i(975),c=e.i(83086),m=e.i(31278),p=e.i(71689);let u=(0,e.i(75254).default)("refresh-ccw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);var x=e.i(17927);function b(){let{isAdmin:e,loading:b}=(0,t.useAuth)(),h=(0,r.useRouter)(),[g,y]=(0,s.useState)(null),[f,_]=(0,s.useState)([]),[v,j]=(0,s.useState)(""),[N,w]=(0,s.useState)(!0),[k,I]=(0,s.useState)(!1),[S,C]=(0,s.useState)(!1),[A,E]=(0,s.useState)(""),[L,M]=(0,s.useState)(""),[R,P]=(0,s.useState)({id:"",modId:""}),[O,T]=(0,s.useState)({id:"",modId:""}),[q,D]=(0,s.useState)({id:"",modId:""}),[z,U]=(0,s.useState)({helmet:{id:"",hideId:"",modId:""},mask:{id:"",hideId:"",modId:""},jacket:{id:"",hideId:"",modId:""},gloves:{id:"",hideId:"",modId:""},pants:{id:"",hideId:"",modId:""},boots:{id:"",hideId:"",modId:""}}),[B,H]=(0,s.useState)(Array(8).fill("")),[W,Y]=(0,s.useState)([,,,].fill(""));(0,s.useEffect)(()=>{b||e||(alert("⚠️ Access Denied\n\nYou do not have permission to access this page."),h.push("/"))},[e,b,h]),(0,s.useEffect)(()=>{e&&a();async function a(){w(!0);try{let[e,a,t,s,r,i,l,d]=await Promise.all([x.supabase.from("calibration").select("id, name").order("name"),x.supabase.from("cradle_master_list").select("id, item_name").order("item_name"),x.supabase.from("ability_master_list").select("id, ability_name").order("ability_name"),x.supabase.from("gear_set_master_list").select("id, set_name").order("set_name"),x.supabase.from("hide_master_list").select("id, material_name").order("material_name"),x.supabase.from("mod_master_list").select("id, mod_name").order("mod_name"),x.supabase.from("weapon_master_list").select("id, weapon_name").order("weapon_name"),x.supabase.from("builds").select("id, build_name").order("build_name")]);y({calibrations:e.data||[],cradleItems:a.data||[],abilities:t.data||[],gearSets:s.data||[],hides:r.data||[],mods:i.data||[],weapons:l.data||[]}),_(d.data||[])}catch(e){console.error("Error fetching options:",e)}finally{w(!1)}}},[e]);let $=async e=>{if(j(e),e){I(!0);try{let{data:a,error:t}=await x.supabase.from("builds").select("*").eq("id",e).single();if(t)throw t;let[s,r,i]=await Promise.all([x.supabase.from("build_gear").select("*").eq("build_id",e),x.supabase.from("build_cradle").select("*").eq("build_id",e).order("item_slot"),x.supabase.from("build_ability_assignment").select("*").eq("build_id",e).order("ability_rank")]);E(a.build_name),M(a.calibration_id||"");let l=s.data||[],d={...z};P({id:"",modId:""}),T({id:"",modId:""}),D({id:"",modId:""}),l.forEach(e=>{"weapon_1"===e.slot_name?P({id:e.weapon_id||"",modId:e.mod_id||""}):"weapon_2"===e.slot_name?T({id:e.weapon_id||"",modId:e.mod_id||""}):"melee"===e.slot_name?D({id:e.weapon_id||"",modId:e.mod_id||""}):d[e.slot_name]&&(d[e.slot_name]={id:e.gear_set_id||"",hideId:e.hide_material_id||"",modId:e.mod_id||""})}),U(d);let o=Array(8).fill("");r.data?.forEach(e=>{e.item_slot>=1&&e.item_slot<=8&&(o[e.item_slot-1]=e.cradle_item_id)}),H(o);let n=[,,,].fill("");i.data?.forEach(e=>{e.ability_rank>=1&&e.ability_rank<=3&&(n[e.ability_rank-1]=e.ability_master_id)}),Y(n)}catch(e){console.error("Error fetching build:",e),alert(`❌ Data Extraction Failed: ${e.message}`)}finally{I(!1)}}},F=async e=>{if(e.preventDefault(),A&&!S&&v){C(!0);try{let{error:e}=await x.supabase.from("builds").update({build_name:A,calibration_id:L||null}).eq("id",v);if(e)throw e;await Promise.all([x.supabase.from("build_gear").delete().eq("build_id",v),x.supabase.from("build_cradle").delete().eq("build_id",v),x.supabase.from("build_ability_assignment").delete().eq("build_id",v)]);let a=[...Object.entries(z).map(([e,a])=>({build_id:v,slot_name:e,gear_set_id:a.id||null,hide_material_id:a.hideId||null,mod_id:a.modId||null})),{build_id:v,slot_name:"weapon_1",weapon_id:R.id||null,mod_id:R.modId||null},{build_id:v,slot_name:"weapon_2",weapon_id:O.id||null,mod_id:O.modId||null},{build_id:v,slot_name:"melee",weapon_id:q.id||null,mod_id:q.modId||null}],t=B.map((e,a)=>({build_id:v,item_slot:a+1,cradle_item_id:e})).filter(e=>e.cradle_item_id),s=W.map((e,a)=>({build_id:v,ability_rank:a+1,ability_master_id:e})).filter(e=>e.ability_master_id);await Promise.all([x.supabase.from("build_gear").insert(a.filter(e=>e.gear_set_id||e.weapon_id||e.mod_id)),t.length>0?x.supabase.from("build_cradle").insert(t):Promise.resolve(),s.length>0?x.supabase.from("build_ability_assignment").insert(s):Promise.resolve()]),alert("✨ Build profile updated and encrypted."),h.push("/")}catch(e){console.error("Update error:",e),alert(`❌ Strategy Failure: ${e.message}`)}finally{C(!1)}}};return b||N?(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-background",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)(m.Loader2,{className:"h-12 w-12 text-primary animate-spin mx-auto"}),(0,a.jsx)("p",{className:"text-xs tracking-[0.3em] text-muted-foreground uppercase opacity-60",children:"Initializing Neural Link..."})]})}):e?(0,a.jsxs)("div",{className:"mx-auto max-w-5xl p-6 pb-20 space-y-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between border-b border-border/30 pb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(u,{className:"h-8 w-8 text-primary"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-glow-cyan uppercase tracking-tight italic",children:"Protocol Reflow"}),(0,a.jsx)("p",{className:"text-[10px] tracking-widest text-muted-foreground uppercase mt-1",children:"Tactical Asset recalibration system"})]})]}),(0,a.jsxs)("button",{onClick:()=>h.push("/"),className:"flex items-center gap-2 text-xs tracking-widest text-muted-foreground hover:text-foreground transition-colors",children:[(0,a.jsx)(p.ArrowLeft,{className:"h-3 w-3"}),"[ ABORT_MISSION ]"]})]}),(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsx)("div",{className:"glass-card rounded-lg p-6 bg-slate-950/40 border border-primary/20",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("label",{className:"text-[10px] tracking-widest text-primary uppercase font-bold",children:"Select Tactical Designation to Edit"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("select",{value:v,onChange:e=>$(e.target.value),className:"w-full bg-slate-900 border border-slate-800 rounded px-4 py-3 text-sm text-foreground focus:border-primary/50 outline-none transition-all appearance-none cursor-pointer",children:[(0,a.jsx)("option",{value:"",children:"-- SELECT NEURAL LINK TO MODIFY --"}),f.map(e=>(0,a.jsx)("option",{value:e.id,children:e.build_name.toUpperCase()},e.id))]}),k&&(0,a.jsxs)("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-[10px] text-primary animate-pulse",children:"DECRYPTING..."}),(0,a.jsx)(m.Loader2,{className:"h-4 w-4 text-primary animate-spin"})]})]})]})}),v&&!k&&(0,a.jsxs)("form",{onSubmit:F,className:"space-y-10 animate-in fade-in duration-500",children:[(0,a.jsxs)("div",{className:"glass-card rounded-lg p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm tracking-[0.3em] text-accent font-bold uppercase border-b border-border/20 pb-2",children:[(0,a.jsx)(l.Activity,{className:"h-4 w-4"}),"Identity_Parameters"]}),(0,a.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-[10px] tracking-widest text-muted-foreground uppercase font-bold",children:"Designation"}),(0,a.jsx)("input",{required:!0,value:A,onChange:e=>E(e.target.value),placeholder:"Enter tactical designation...",className:"w-full bg-slate-950 border border-slate-800 rounded px-3 py-2 text-sm text-foreground focus:border-primary/50 outline-none transition-all"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-[10px] tracking-widest text-muted-foreground uppercase font-bold",children:"Calibration"}),(0,a.jsxs)("select",{value:L,onChange:e=>M(e.target.value),className:"w-full bg-slate-950 border border-slate-800 rounded px-3 py-2 text-sm text-foreground focus:border-primary/50 outline-none transition-all appearance-none",children:[(0,a.jsx)("option",{value:"",children:"Select Calibration..."}),g?.calibrations.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]})]}),(0,a.jsxs)("div",{className:"glass-card rounded-lg p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm tracking-[0.3em] text-accent font-bold uppercase border-b border-border/20 pb-2",children:[(0,a.jsx)(o.Sword,{className:"h-4 w-4"}),"Kinetic_Loadout"]}),(0,a.jsx)("div",{className:"grid gap-6",children:[{label:"PRIMARY WEAPON",state:R,setState:P},{label:"SECONDARY WEAPON",state:O,setState:T},{label:"MELEE ASSET",state:q,setState:D}].map(e=>(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-4 p-4 border border-slate-800 rounded bg-slate-900/50",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("span",{className:"text-[10px] tracking-widest text-primary uppercase font-bold",children:e.label})}),(0,a.jsxs)("select",{value:e.state.id,onChange:a=>e.setState({...e.state,id:a.target.value}),className:"bg-slate-950 border border-slate-800 rounded px-3 py-2 text-xs text-foreground focus:border-primary/50 outline-none",children:[(0,a.jsx)("option",{value:"",children:"Select Weapon..."}),g?.weapons.map(e=>(0,a.jsx)("option",{value:e.id,children:e.weapon_name},e.id))]}),(0,a.jsxs)("select",{value:e.state.modId,onChange:a=>e.setState({...e.state,modId:a.target.value}),className:"bg-slate-950 border border-slate-800 rounded px-3 py-2 text-xs text-foreground focus:border-primary/50 outline-none",children:[(0,a.jsx)("option",{value:"",children:"Select Mod..."}),g?.mods.map(e=>(0,a.jsx)("option",{value:e.id,children:e.mod_name},e.id))]})]},e.label))})]}),(0,a.jsxs)("div",{className:"glass-card rounded-lg p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm tracking-[0.3em] text-accent font-bold uppercase border-b border-border/20 pb-2",children:[(0,a.jsx)(d.Shield,{className:"h-4 w-4"}),"Armor_Subsystems"]}),(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:Object.keys(z).map(e=>(0,a.jsxs)("div",{className:"space-y-3 p-4 border border-slate-800 rounded bg-slate-900/50",children:[(0,a.jsx)("label",{className:"text-[10px] tracking-widest text-primary uppercase font-bold",children:e}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("select",{value:z[e].id,onChange:a=>U({...z,[e]:{...z[e],id:a.target.value}}),className:"w-full bg-slate-950 border border-slate-800 rounded px-2 py-1.5 text-[11px] text-foreground focus:border-primary/50 outline-none transition-all",children:[(0,a.jsx)("option",{value:"",children:"Base Item..."}),g?.gearSets.map(e=>(0,a.jsx)("option",{value:e.id,children:e.set_name},e.id))]}),(0,a.jsxs)("select",{value:z[e].hideId,onChange:a=>U({...z,[e]:{...z[e],hideId:a.target.value}}),className:"w-full bg-slate-950 border border-slate-800 rounded px-2 py-1.5 text-[11px] text-foreground focus:border-primary/50 outline-none transition-all",children:[(0,a.jsx)("option",{value:"",children:"Hide Material..."}),g?.hides.map(e=>(0,a.jsx)("option",{value:e.id,children:e.material_name},e.id))]}),(0,a.jsxs)("select",{value:z[e].modId,onChange:a=>U({...z,[e]:{...z[e],modId:a.target.value}}),className:"w-full bg-slate-950 border border-slate-800 rounded px-2 py-1.5 text-[11px] text-foreground focus:border-primary/50 outline-none transition-all",children:[(0,a.jsx)("option",{value:"",children:"Armor Mod..."}),g?.mods.map(e=>(0,a.jsx)("option",{value:e.id,children:e.mod_name},e.id))]})]})]},e))})]}),(0,a.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"glass-card rounded-lg p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm tracking-[0.3em] text-accent font-bold uppercase border-b border-border/20 pb-2",children:[(0,a.jsx)(n.Crosshair,{className:"h-4 w-4"}),"Cradle_Integration"]}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:B.map((e,t)=>(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("label",{className:"text-[9px] tracking-widest text-muted-foreground uppercase",children:["Slot ",t+1]}),(0,a.jsxs)("select",{value:e,onChange:e=>{let a=[...B];a[t]=e.target.value,H(a)},className:"w-full bg-slate-950 border border-slate-800 rounded px-2 py-1.5 text-[10px] text-foreground focus:border-primary/50 outline-none",children:[(0,a.jsx)("option",{value:"",children:"Select Item..."}),g?.cradleItems.map(e=>(0,a.jsx)("option",{value:e.id,children:e.item_name},e.id))]})]},t))})]}),(0,a.jsxs)("div",{className:"glass-card rounded-lg p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm tracking-[0.3em] text-accent font-bold uppercase border-b border-border/20 pb-2",children:[(0,a.jsx)(c.Sparkles,{className:"h-4 w-4"}),"Evolutionary_Traits"]}),(0,a.jsx)("div",{className:"space-y-4",children:W.map((e,t)=>(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("label",{className:"text-[9px] tracking-widest text-muted-foreground uppercase",children:["Trait Array ",t+1]}),(0,a.jsxs)("select",{value:e,onChange:e=>{let a=[...W];a[t]=e.target.value,Y(a)},className:"w-full bg-slate-950 border border-slate-800 rounded px-3 py-2 text-xs text-foreground focus:border-primary/50 outline-none",children:[(0,a.jsx)("option",{value:"",children:"Select Ability..."}),g?.abilities.map(e=>(0,a.jsx)("option",{value:e.id,children:e.ability_name},e.id))]})]},t))})]})]}),(0,a.jsx)("div",{className:"flex justify-center pt-6",children:(0,a.jsxs)("button",{type:"submit",disabled:S||!A,className:"group relative flex items-center gap-3 px-12 py-4 bg-primary text-primary-foreground font-bold tracking-[0.2em] rounded border border-primary/50 transition-all hover:shadow-[0_0_20px_rgba(34,211,238,0.3)] hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",children:[S?(0,a.jsx)(m.Loader2,{className:"h-5 w-5 animate-spin"}):(0,a.jsx)(i.Save,{className:"h-5 w-5"}),S?"SYNCHRONIZING...":"REFRACT_BUILD_PROFILE",(0,a.jsx)("div",{className:"absolute inset-0 bg-primary/20 blur-xl opacity-0 group-hover:opacity-100 transition-opacity"})]})})]})]})]}):null}e.s(["default",()=>b],68089)}]);